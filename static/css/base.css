/* Dark theme (default) */
:root[data-theme="dark"] {
--bg-primary: #1a1a1a;
--bg-secondary: #2d2d2d;
--bg-tertiary: #3d3d3d;
--bg-quaternary: #4d4d4d;
--text-primary: #ffffff;
--text-secondary: #cccccc;
--border-color: #555555;
--accent-color: #007acc;
--success-color: #28a745;
--warning-color: #ffc107;
--danger-color: #dc3545;
--shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
--radius: 8px;
--transition: all 0.3s ease;
--gradient-start: #0a0a0a;
--gradient-end: #1a1a1a;
--glass-bg: rgba(45, 45, 45, 0.7);
--glass-border: rgba(85, 85, 85, 0.3);
--code-bg: #1a1a1a;
--code-border: #555555;

/* Legacy compatibility */
--primary-color: #007acc;
--sidebar-bg: linear-gradient(180deg, #2d2d2d 0%, #1a1a1a 100%);
--sidebar-hover: #3d3d3d;
--card-bg: #2d2d2d;
--card-header-bg: linear-gradient(135deg, #3d3d3d, #2d2d2d);
--table-bg: #2d2d2d;
--table-hover: rgba(8, 102, 255, 0.08);
--input-bg: #3d3d3d;
--input-border: #555555;
--modal-bg: #2d2d2d;
--navbar-bg: linear-gradient(135deg, #3d3d3d 0%, #2d2d2d 100%);
--card-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Light theme */
:root[data-theme="light"] {
--bg-primary: #F8FAFC;
--bg-secondary: #D9EAFD;
--bg-tertiary: #BCCCDC;
--bg-quaternary: #9AA6B2;
--text-primary: #1c1e21;
--text-secondary: #5f6368;
--border-color: #BCCCDC;
--accent-color: #0866ff;
--success-color: #42b883;
--warning-color: #f0ad4e;
--danger-color: #d9534f;
--shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
--radius: 8px;
--transition: all 0.3s ease;
--gradient-start: #D9EAFD;
--gradient-end: #F8FAFC;
--glass-bg: rgba(248, 250, 252, 0.8);
--glass-border: rgba(188, 204, 220, 0.4);
--code-bg: #f5f5f5;
--code-border: #ddd;

/* Legacy compatibility */
--primary-color: #0866ff;
--sidebar-bg: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
--sidebar-hover: #D9EAFD;
--card-bg: #ffffff;
--card-header-bg: linear-gradient(135deg, #f8fafc, #D9EAFD);
--table-bg: #ffffff;
--table-hover: rgba(8, 102, 255, 0.08);
--input-bg: #ffffff;
--input-border: #BCCCDC;
--modal-bg: #ffffff;
--navbar-bg: linear-gradient(135deg, #0866ff 0%, #0645b8 100%);
--card-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* Default to dark theme */
:root {
--bg-primary: #1a1a1a;
--bg-secondary: #2d2d2d;
--bg-tertiary: #3d3d3d;
--bg-quaternary: #4d4d4d;
--text-primary: #ffffff;
--text-secondary: #cccccc;
--border-color: #555555;
--accent-color: #007acc;
--success-color: #28a745;
--warning-color: #ffc107;
--danger-color: #dc3545;
--shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
--radius: 8px;
--transition: all 0.3s ease;
--gradient-start: #0a0a0a;
--gradient-end: #1a1a1a;
--glass-bg: rgba(45, 45, 45, 0.7);
--glass-border: rgba(85, 85, 85, 0.3);
--code-bg: #1a1a1a;
--code-border: #555555;

/* Legacy compatibility */
--primary-color: #007acc;
--sidebar-bg: linear-gradient(180deg, #2d2d2d 0%, #1a1a1a 100%);
--sidebar-hover: #3d3d3d;
--card-bg: #2d2d2d;
--card-header-bg: linear-gradient(135deg, #3d3d3d, #2d2d2d);
--table-bg: #2d2d2d;
--table-hover: rgba(8, 102, 255, 0.08);
--input-bg: #3d3d3d;
--input-border: #555555;
--modal-bg: #2d2d2d;
--navbar-bg: linear-gradient(135deg, #3d3d3d 0%, #2d2d2d 100%);
--card-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

body {
background-color: var(--bg-primary);
color: var(--text-primary);
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
transition: background-color 0.3s, color 0.3s;
overflow: hidden;
height: 100vh;
}

/* Admin page: allow normal scrolling */
body.admin-page {
overflow: auto;
height: auto;
min-height: 100vh;
}

.navbar {
background: var(--navbar-bg);
box-shadow: 0 2px 10px rgba(0,0,0,0.5);
padding: 0.5rem 1rem;
min-height: 50px;
max-height: 50px;
flex-shrink: 0;
position: relative;
z-index: 1100;
}

/* Ensure all navbar links and buttons are clickable */
.navbar a,
.navbar button {
pointer-events: auto;
position: relative;
}

/* Ensure navbar items are vertically centered */
.navbar .container-fluid {
display: flex;
align-items: center;
height: 100%;
padding-top: 0;
position: relative;
z-index: auto;
}

/* Prevent navbar toggler from blocking elements */
.navbar-toggler {
position: relative;
z-index: 2;
}

/* Ensure buttons don't block dropdown */
.navbar .d-flex {
position: relative;
z-index: 1;
pointer-events: auto;
}

/* Ensure buttons are clickable but don't block other elements */
.navbar .d-flex .btn {
position: relative;
z-index: 2;
pointer-events: auto;
}

/* Fix navbar collapse */
.navbar-collapse {
max-height: none;
}

.navbar-nav {
align-items: center;
}

/* Ensure navbar collapse doesn't block dropdowns on desktop */
@media (min-width: 992px) {
.navbar-collapse {
position: static;
pointer-events: auto;
z-index: auto;
}

.navbar-collapse.show,
.navbar-collapse.collapsing {
position: static;
}

/* Ensure nav items are clickable */
.navbar-nav .nav-item {
position: relative;
z-index: auto;
}

.navbar-nav .nav-link {
position: relative;
z-index: auto;
pointer-events: auto;
}

/* Specifically ensure dropdown items are on top */
.navbar-nav .nav-item.dropdown {
z-index: auto;
}

.navbar-nav .dropdown-toggle {
z-index: auto;
pointer-events: auto;
cursor: pointer;
}
}

@media (max-width: 991.98px) {
.navbar-collapse {
position: absolute;
top: 100%;
left: 0;
right: 0;
background: var(--navbar-bg);
padding: 1rem;
box-shadow: 0 4px 10px rgba(0,0,0,0.3);
max-height: 70vh;
overflow-y: auto;
z-index: 1101;
}
}

.navbar-brand {
font-weight: bold;
font-size: 1.1rem;
display: flex;
align-items: center;
}

.navbar .btn-sm {
padding: 0.25rem 0.5rem;
font-size: 0.8rem;
display: inline-flex;
align-items: center;
justify-content: center;
}

.sidebar {
height: calc(100vh - 50px);
background: var(--sidebar-bg);
box-shadow: 2px 0 20px rgba(0,0,0,0.15);
padding: 1rem 0;
border-right: 1px solid var(--border-color);
overflow-y: auto;
overflow-x: hidden;
}

.sidebar .nav-link {
color: var(--text-primary);
padding: 12px 24px;
margin: 0 12px 4px 12px;
border-radius: 8px;
transition: all 0.3s ease;
font-weight: 500;
}

.sidebar .nav-link:first-child {
margin-top: 0;
}

.sidebar .nav-link:hover {
background-color: var(--sidebar-hover);
color: #ffffff;
transform: translateX(4px);
}

.sidebar .nav-link.active {
background-color: #2a2a2a;
color: white;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
border-left: 3px solid #4a4a4a;
}

.card {
border: 1px solid var(--border-color);
border-radius: 16px;
background-color: var(--card-bg);
color: var(--text-primary);
box-shadow: var(--card-shadow);
transition: transform 0.3s ease, box-shadow 0.3s ease;
overflow: hidden;
}

.card:hover {
transform: translateY(-4px);
box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

[data-theme="dark"] .card:hover {
box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.7), 0 10px 10px -5px rgba(0, 0, 0, 0.5);
}

/* Disable hover transform for transactions page card */
#transactionsPage .card:hover {
transform: none;
box-shadow: var(--card-shadow);
}

.card-header {
background: var(--card-header-bg);
color: var(--text-primary);
border-bottom: 1px solid var(--border-color);
font-weight: 600;
padding: 16px 20px;
}

.card-body {
background-color: var(--card-bg);
padding: 20px;
}

/* Page content - universal container */
.page-content {
height: 100%;
overflow-y: auto;
overflow-x: hidden;
}

/* Compact card for transaction table page */
#transactionsPage {
height: 100%;
display: flex;
flex-direction: column;
overflow: hidden;
}

#transactionsPage .card {
flex: 1;
display: flex;
flex-direction: column;
margin: 0;
height: 100%;
overflow: hidden;
}

#transactionsPage .card-header {
padding: 10px 16px;
flex-shrink: 0;
}

#transactionsPage .card-body {
padding: 12px;
flex: 1;
display: flex;
flex-direction: column;
overflow: hidden;
}

/* Reduce margins in transaction page controls */
#transactionsPage .card-body > .row:first-child {
flex-shrink: 0;
margin-bottom: 0.75rem !important;
}

#transactionsPage .row.mb-3 {
margin-bottom: 0.75rem !important;
align-items: center;
}

#transactionsPage .btn {
padding: 6px 12px;
font-size: 0.875rem;
height: 34px;
}

#transactionsPage .form-select {
padding: 6px 10px;
font-size: 0.875rem;
height: 34px;
}

/* Ensure all controls in transaction controller bar align */
#transactionsPage .card-body > .row:first-child .col-md-2,
#transactionsPage .card-body > .row:first-child .col-md-1 {
display: flex;
align-items: center;
}

/* Month navigation buttons */
#prevMonthBtn, #nextMonthBtn {
width: 100%;
background-color: #2a2a2a;
border-color: #3a3a3a;
color: #ffffff;
}

#prevMonthBtn:hover, #nextMonthBtn:hover {
background-color: #3a3a3a;
border-color: #4a4a4a;
}

.stat-card {
position: relative;
overflow: hidden;
}

.stat-card::before {
content: '';
position: absolute;
top: 0;
right: -50px;
width: 100px;
height: 100%;
background: rgba(255,255,255,0.03);
transform: skewX(-25deg);
}

/* Smaller stat cards */
.stat-card .card-body {
padding: 8px 14px;
}

.stat-card h6 {
font-size: 0.7rem;
margin-bottom: 0.15rem !important;
}

.stat-card h3 {
font-size: 1.1rem;
margin-bottom: 0 !important;
}

.stat-icon {
font-size: 1.5rem;
opacity: 0.15;
position: absolute;
right: 12px;
top: 10px;
}

/* Stat card color overrides - align with base theme */
.stat-card.bg-primary {
background: var(--bg-tertiary) !important;
border: 1px solid var(--border-color);
}

.stat-card.bg-success {
background: var(--bg-tertiary) !important;
border: 1px solid var(--border-color);
}

.stat-card.bg-danger {
background: var(--bg-tertiary) !important;
border: 1px solid var(--border-color);
}

.stat-card.bg-info {
background: var(--bg-tertiary) !important;
border: 1px solid var(--border-color);
}

/* Overview page scrolling */
#overviewPage {
overflow-y: auto !important;
overflow-x: hidden !important;
}

/* Reports page scrolling */
#reportsPage {
overflow-y: auto !important;
overflow-x: hidden !important;
}

/* Smaller chart cards */
#overviewPage .card-header {
padding: 10px 16px;
}

#overviewPage .card-body {
padding: 15px;
}

#overviewPage .row.mb-4 {
margin-bottom: 1rem !important;
}

#overviewPage .row.mb-3 {
margin-bottom: 0.75rem !important;
}

/* Reduce chart height */
.chart-container {
height: 250px !important;
}

#trendChart {
max-height: 250px;
}

/* Dark theme buttons */
.btn-gradient, .btn-primary, .btn-success, .btn-info, .btn-warning, .btn-danger {
background-color: #2a2a2a;
border-color: #3a3a3a;
color: #ffffff;
transition: all 0.3s ease;
font-weight: 500;
}

.btn-gradient:hover, .btn-primary:hover, .btn-success:hover, .btn-info:hover, .btn-warning:hover, .btn-danger:hover {
background-color: #3a3a3a;
border-color: #4a4a4a;
color: #ffffff;
transform: translateY(-2px);
box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
}

.btn {
border-radius: 8px;
padding: 10px 20px;
font-weight: 500;
transition: all 0.3s ease;
background-color: #2a2a2a;
border-color: #3a3a3a;
color: #ffffff;
}

.btn:hover {
transform: translateY(-2px);
background-color: #3a3a3a;
border-color: #4a4a4a;
}

.btn-sm {
background-color: #2a2a2a;
border-color: #3a3a3a;
color: #ffffff;
}

.btn-sm:hover {
background-color: #3a3a3a;
border-color: #4a4a4a;
color: #ffffff;
}

/* Tables */
.table {
color: var(--text-primary);
}

.table-hover tbody tr {
background-color: var(--table-bg);
}

.table-hover tbody tr:hover {
background-color: var(--table-hover);
}

.table thead th {
border-color: var(--border-color);
background-color: var(--card-bg);
color: var(--text-primary);
position: sticky;
top: 0;
z-index: 10;
}

/* Sticky header for transactions table */
#transactionsTable thead th {
position: sticky;
top: 0;
z-index: 10;
background-color: var(--card-bg);
color: var(--text-primary);
border-bottom: 2px solid var(--border-color);
padding: 6px 4px !important;
font-size: 0.8rem;
font-weight: normal;
}

/* Fixed table layout for consistent column widths */
#transactionsTable {
table-layout: fixed;
width: 100%;
}

/* Fixed column widths */
#transactionsTable thead th:nth-child(1) { width: 50px; }   /* Method checkbox */
#transactionsTable thead th:nth-child(2) { width: 60px; }   /* ID */
#transactionsTable thead th:nth-child(3) { width: 250px; }  /* Description */
#transactionsTable thead th:nth-child(4) { width: 120px; }  /* Category */
#transactionsTable thead th:nth-child(5) { width: 100px; }  /* Debit */
#transactionsTable thead th:nth-child(6) { width: 100px; }  /* Credit */
#transactionsTable thead th:nth-child(7) { width: 110px; }  /* Balance */
#transactionsTable thead th:nth-child(8) { width: 150px; }  /* Notes */
#transactionsTable thead th:nth-child(9) { width: 120px; }  /* Actions */

/* Compact transaction table rows with fixed height */
#transactionsTable tbody tr {
height: 28px;
max-height: 28px;
}

#transactionsTable tbody td {
padding: 4px 4px !important;
font-size: 0.8rem;
vertical-align: middle;
overflow: hidden;
max-height: 28px;
}

/* Remove bold from balance column */
#transactionsTable .fw-bold {
font-weight: normal !important;
}

/* Description column - allow wrapping with fixed height */
#transactionsTable tbody td:nth-child(3) {
white-space: normal;
word-wrap: break-word;
line-height: 1.2;
max-height: 28px;
overflow: hidden;
}

/* Modern action icons in transaction table */
#transactionsTable .btn-sm {
padding: 4px 6px;
font-size: 0.85rem;
border: none;
background: transparent;
border-radius: 4px;
transition: all 0.2s ease;
cursor: pointer;
}

#transactionsTable .btn-primary {
color: #0d6efd;
}

#transactionsTable .btn-primary:hover {
background-color: rgba(13, 110, 253, 0.1);
color: #0d6efd;
transform: scale(1.1);
}

#transactionsTable .btn-danger {
color: #dc3545;
}

#transactionsTable .btn-danger:hover {
background-color: rgba(220, 53, 69, 0.1);
color: #dc3545;
transform: scale(1.1);
}

#transactionsTable .btn-sm i {
font-size: 0.9rem;
}

/* Smaller badges in transaction table */
#transactionsTable .badge {
padding: 1px 6px;
font-size: 0.65rem;
}

/* Smaller checkbox in transaction table */
#transactionsTable .form-check-input {
width: 14px;
height: 14px;
margin-top: 0;
}

/* Scrollable table container - only table scrolls */
#transactionsPage .table-responsive {
flex: 1;
overflow-y: auto;
overflow-x: auto;
min-height: 0;
}

/* Other pages table responsive */
.table-responsive {
overflow-y: auto;
overflow-x: auto;
}

.table td, .table th {
border-color: var(--border-color);
}

/* Transaction highlighting - Keep original colors in both themes */
.transaction-highlighted td {
/* No filter - keep payment method colors vibrant and unchanged */
}

[data-theme="light"] .transaction-highlighted td {
filter: brightness(0.95) !important;
}

/* Dark theme: Transaction table uses same styling as light theme */
/* No custom dark theme styling - keeps light theme appearance for consistency */

.badge {
padding: 5px 10px;
border-radius: 20px;
}

.income-badge {
background-color: var(--success-color);
}

.expense-badge {
background-color: var(--danger-color);
}

/* Forms */
.form-control, .form-select {
background-color: var(--input-bg);
border: 1px solid var(--input-border);
border-radius: 8px;
color: var(--text-primary);
padding: 10px 14px;
transition: all 0.3s ease;
}

/* Reduce font size for dropdowns to prevent text clipping */
.form-select {
font-size: 0.875rem;
line-height: 1.5;
}

.form-control:focus, .form-select:focus {
background-color: var(--input-bg);
border-color: var(--primary-color);
color: var(--text-primary);
box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
outline: none;
}

/* Fix text overlap in centered form-select dropdowns */
.form-select.text-center {
padding-left: 30px;
padding-right: 30px;
text-align: center;
text-align-last: center;
}

.form-label {
color: var(--text-primary);
font-weight: 500;
margin-bottom: 8px;
}

textarea.form-control {
background-color: var(--input-bg);
color: var(--text-primary);
}

/* Modals */
.modal-content {
background-color: var(--modal-bg);
color: var(--text-primary);
border: 1px solid var(--border-color);
border-radius: 16px;
box-shadow: var(--card-shadow);
}

.modal-header {
background: var(--card-header-bg);
border-bottom: 1px solid var(--border-color);
border-radius: 16px 16px 0 0;
padding: 20px 24px;
}

.modal-footer {
background: var(--card-header-bg);
border-top: 1px solid var(--border-color);
border-radius: 0 0 16px 16px;
padding: 16px 24px;
}

.modal-body {
padding: 24px;
}

.modal-title {
font-weight: 600;
font-size: 1.25rem;
}

[data-theme="dark"] .btn-close {
filter: invert(1);
}

.progress {
height: 25px;
border-radius: 15px;
background-color: var(--bg-tertiary);
}

.progress-bar {
font-size: 0.9rem;
font-weight: bold;
}

/* Fix main content alignment */
main.col-md-9 {
padding-left: 1rem;
padding-right: 1rem;
padding-top: 1rem;
padding-bottom: 1rem;
overflow: hidden;
height: 100%;
display: flex;
flex-direction: column;
}

/* Prevent content overlap with navbar */
.container-fluid {
padding-top: 0;
padding-left: 0;
padding-right: 0;
height: calc(100vh - 50px);
overflow: hidden;
position: relative;
z-index: 1;
}

/* Admin page: reset container-fluid constraints */
body.admin-page .container-fluid {
height: auto;
overflow: visible;
}

/* Dashboard row fills height */
.container-fluid > .row {
height: 100%;
overflow: hidden;
margin: 0;
}

/* Admin page: reset row constraints */
body.admin-page .container-fluid > .row {
height: auto;
overflow: visible;
}

/* Fix controller bar button alignment */
.card-header .row {
align-items: center;
}

.card-header .col,
.card-header .col-auto {
display: flex;
align-items: center;
}

/* Fix form controls alignment in rows */
.row .form-select,
.row .btn {
height: 38px;
}

/* Ensure consistent button sizing in button groups */
.btn-group .btn,
.row .btn {
vertical-align: middle;
}

@media (max-width: 768px) {
.sidebar {
min-height: auto;
}

main.col-md-9 {
padding-left: 1rem;
padding-right: 1rem;
}
}

.chart-container {
position: relative;
height: 400px;
width: 100%;
}

/* Enhanced Global Loading Spinner */
.loading-spinner {
display: none;
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
z-index: 99999;
pointer-events: none;
}

.loading-spinner.active {
display: block;
pointer-events: auto;
}

.loading-overlay {
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0, 0, 0, 0.85);
backdrop-filter: blur(4px);
display: flex;
justify-content: center;
align-items: center;
animation: fadeIn 0.2s ease-in;
}

.loading-content {
text-align: center;
}

.spinner-wrapper {
position: relative;
width: 80px;
height: 80px;
margin: 0 auto 20px;
}

.spinner-ring {
position: absolute;
width: 100%;
height: 100%;
border: 3px solid transparent;
border-radius: 50%;
animation: spin 1.5s cubic-bezier(0.5, 0, 0.5, 1) infinite;
}

.spinner-ring:nth-child(1) {
border-top-color: #007acc;
animation-delay: -0.45s;
}

.spinner-ring:nth-child(2) {
border-top-color: #00a8ff;
animation-delay: -0.3s;
}

.spinner-ring:nth-child(3) {
border-top-color: #0dd3ff;
animation-delay: -0.15s;
}

.spinner-ring:nth-child(4) {
border-top-color: #5ce1ff;
}

@keyframes spin {
0% {
transform: rotate(0deg);
}
100% {
transform: rotate(360deg);
}
}

@keyframes fadeIn {
from {
opacity: 0;
}
to {
opacity: 1;
}
}

.loading-text {
color: #ffffff;
font-size: 1rem;
font-weight: 500;
letter-spacing: 1px;
animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
0%, 100% {
opacity: 1;
}
50% {
opacity: 0.5;
}
}

.toast-container {
position: fixed;
top: 80px;
right: 20px;
z-index: 9999;
}

/* Transaction row highlighting for payment methods */
.transaction-highlighted {
font-weight: 500;
}

.transaction-highlighted td {
border-color: rgba(0,0,0,0.1) !important;
}

/* Hover effect - slightly darker for both themes */
[data-theme="light"] .transaction-highlighted:hover td {
filter: brightness(0.95) !important;
}

[data-theme="dark"] .transaction-highlighted:hover td {
filter: brightness(0.95) !important;
}

/* List Groups */
.list-group-item {
background-color: var(--card-bg);
border-color: var(--border-color);
color: var(--text-primary);
}

.list-group-item:hover {
background-color: var(--table-hover);
}

.list-group-item-action:hover {
background-color: var(--table-hover);
color: var(--primary-color);
}

/* Alerts */
[data-theme="light"] .alert-info {
background-color: #d1ecf1;
border-color: #bee5eb;
color: #0c5460;
}

[data-theme="dark"] .alert-info {
background-color: #1a3a42;
border-color: var(--primary-color);
color: var(--text-primary);
}

[data-theme="light"] .alert-warning {
background-color: #fff3cd;
border-color: #ffeaa7;
color: #856404;
}

[data-theme="dark"] .alert-warning {
background-color: #3d2800;
border-color: var(--warning-color);
color: var(--text-primary);
}

[data-theme="light"] .alert-danger {
background-color: #f8d7da;
border-color: #f5c6cb;
color: #721c24;
}

[data-theme="dark"] .alert-danger {
background-color: #3d0800;
border-color: var(--danger-color);
color: var(--text-primary);
}

[data-theme="light"] .alert-success {
background-color: #d4edda;
border-color: #c3e6cb;
color: #155724;
}

[data-theme="dark"] .alert-success {
background-color: #0d3d1f;
border-color: var(--success-color);
color: var(--text-primary);
}

.payment-method-list-item {
cursor: pointer;
transition: all 0.2s;
}

.payment-method-list-item:hover {
background-color: var(--table-hover);
transform: translateX(5px);
}

.payment-method-color-indicator {
width: 30px;
height: 30px;
border-radius: 5px;
display: inline-block;
margin-right: 10px;
}

.credit-card-item {
display: flex;
align-items: center;
padding: 10px;
border: 1px solid var(--border-color);
border-radius: 5px;
margin-bottom: 10px;
background-color: var(--card-bg);
color: var(--text-primary);
}

.credit-card-color {
width: 40px;
height: 40px;
border-radius: 5px;
margin-right: 15px;
}

/* Dropdown */
.dropdown-menu {
background-color: var(--card-bg);
border-color: var(--border-color);
z-index: 1050;
display: none;
}

.dropdown-menu.show {
display: block !important;
visibility: visible !important;
opacity: 1 !important;
}

.dropdown-item {
color: var(--text-primary);
}

.dropdown-item:hover {
background-color: var(--table-hover);
color: var(--primary-color);
}

/* Fix navbar dropdown clickability - ensure it appears above everything */
.navbar .dropdown-menu {
z-index: 9999 !important;
position: absolute;
pointer-events: auto;
}

.navbar .dropdown-menu.show {
display: block !important;
visibility: visible !important;
opacity: 1 !important;
}

.navbar .dropdown {
position: relative;
z-index: auto;
}

.navbar .nav-item.dropdown {
position: relative;
z-index: auto !important;
}

/* Ensure navbar doesn't clip dropdown */
.navbar,
.navbar .navbar-collapse,
.navbar .container-fluid {
overflow: visible !important;
}

/* Ensure navbar parent containers don't clip dropdown on dashboard */
body:not(.admin-page) {
overflow-y: hidden;
overflow-x: hidden;
}

/* Allow dropdown to escape body overflow on dashboard */
body:not(.admin-page) .navbar {
position: relative;
overflow: visible !important;
z-index: 1100;
}

.navbar .dropdown-toggle {
position: relative;
z-index: auto !important;
pointer-events: auto !important;
cursor: pointer !important;
}

@media (min-width: 992px) {
.navbar .nav-item.dropdown {
position: relative;
z-index: auto !important;
}
}

/* Theme Toggle Icon */
.theme-toggle-icon {
cursor: pointer;
transition: transform 0.3s;
}

.theme-toggle-icon:hover {
transform: rotate(20deg);
}

/* ========================================
   Enhanced User Profile Menu
   ======================================== */

/* User Profile Toggle Button */
.user-profile-toggle {
display: flex !important;
align-items: center;
gap: 8px;
padding: 6px 12px !important;
border-radius: 50px;
transition: all 0.3s ease;
background-color: rgba(255, 255, 255, 0.1);
}

.user-profile-toggle:hover {
background-color: rgba(255, 255, 255, 0.2);
transform: translateY(-1px);
}

/* User Avatar Circle */
.user-avatar {
width: 32px;
height: 32px;
border-radius: 50%;
background: linear-gradient(135deg, #3d3d3d 0%, #2d2d2d 100%);
display: flex;
align-items: center;
justify-content: center;
flex-shrink: 0;
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
transition: all 0.3s ease;
}

.user-profile-toggle:hover .user-avatar {
transform: scale(1.05);
box-shadow: 0 4px 12px rgba(0, 122, 204, 0.4);
}

.user-initials {
color: #ffffff;
font-weight: 600;
font-size: 14px;
text-transform: uppercase;
}

.user-name-display {
font-weight: 500;
color: #ffffff;
white-space: nowrap;
}

/* User Dropdown Menu */
.user-dropdown-menu {
min-width: 280px;
padding: 0;
border: 1px solid var(--border-color) !important;
border-radius: 12px;
box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
margin-top: 8px !important;
overflow: hidden;
background-color: var(--card-bg) !important;
}

/* Remove animation initially to test if it's causing the flash
@keyframes dropdownSlideIn {
from {
opacity: 0;
transform: translateY(-10px);
}
to {
opacity: 1;
transform: translateY(0);
}
}
*/

/* User Info Header */
.user-info-header {
padding: 20px 16px !important;
background: linear-gradient(135deg, #3d3d3d 0%, #2d2d2d 100%);
display: flex;
align-items: center;
gap: 12px;
white-space: normal !important;
}

[data-theme="dark"] .user-info-header {
background: linear-gradient(135deg, #3d3d3d 0%, #2d2d2d 100%);
}

.user-avatar-large {
width: 48px;
height: 48px;
border-radius: 50%;
background: rgba(255, 255, 255, 0.2);
display: flex;
align-items: center;
justify-content: center;
flex-shrink: 0;
border: 2px solid rgba(255, 255, 255, 0.3);
}

.user-initials-large {
color: #ffffff;
font-weight: 700;
font-size: 20px;
text-transform: uppercase;
}

.user-info-text {
flex: 1;
overflow: hidden;
}

.user-display-name {
color: #ffffff;
font-weight: 600;
font-size: 16px;
margin-bottom: 4px;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}

.user-role-badge {
color: rgba(255, 255, 255, 0.9);
font-size: 12px;
font-weight: 500;
display: inline-flex;
align-items: center;
background: rgba(255, 255, 255, 0.2);
padding: 2px 8px;
border-radius: 10px;
}

/* Dropdown Item Label */
.dropdown-item-label {
padding: 8px 16px 4px 16px;
font-size: 11px;
font-weight: 600;
text-transform: uppercase;
letter-spacing: 0.5px;
color: var(--text-secondary);
opacity: 0.7;
}

/* Enhanced Dropdown Items */
.user-dropdown-menu .dropdown-item {
padding: 10px 16px;
transition: all 0.2s ease;
display: flex;
align-items: center;
font-size: 14px;
}

.user-dropdown-menu .dropdown-item i {
width: 20px;
text-align: center;
opacity: 0.7;
transition: opacity 0.2s ease;
}

.user-dropdown-menu .dropdown-item:hover {
background-color: var(--table-hover);
padding-left: 20px;
}

.user-dropdown-menu .dropdown-item:hover i {
opacity: 1;
}

/* Logout Item - Special Styling */
.dropdown-item-logout {
color: var(--danger-color) !important;
font-weight: 500;
}

.dropdown-item-logout:hover {
background-color: rgba(220, 53, 69, 0.1) !important;
}

.dropdown-item-logout i {
color: var(--danger-color);
opacity: 1 !important;
}

/* Divider Styling */
.user-dropdown-menu .dropdown-divider {
margin: 8px 0;
opacity: 0.5;
}

/* Mobile Responsive */
@media (max-width: 768px) {
.user-name-display {
display: none;
}

.user-profile-toggle {
padding: 6px 8px !important;
}

.user-dropdown-menu {
min-width: 260px;
}
}

/* Light Theme Adjustments */
[data-theme="light"] .user-profile-toggle {
background-color: rgba(0, 0, 0, 0.05);
}

[data-theme="light"] .user-profile-toggle:hover {
background-color: rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .user-name-display {
color: #ffffff;
}

/* ============================================================
   Tax Calculator - Saved Calculations Dark Mode Fix
   ============================================================ */

/* Field labels in saved calculations - ensure visibility in dark mode */
[data-theme="dark"] .calculation-item small.text-muted {
    color: var(--text-secondary) !important;
    opacity: 0.9;
}

/* Date text in saved calculations */
[data-theme="dark"] .calculation-item .text-muted {
    color: var(--text-secondary) !important;
    opacity: 0.8;
}

/* Strong values should be clearly visible */
[data-theme="dark"] .calculation-item strong {
    color: var(--text-primary);
}

/* List group items in dark mode */
[data-theme="dark"] .calculation-item {
    background-color: var(--bg-secondary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

[data-theme="dark"] .calculation-item:hover {
    background-color: var(--bg-tertiary);
}

/* Active calculation border in dark mode */
[data-theme="dark"] .calculation-item.border-success {
    border-color: var(--success-color) !important;
    border-width: 2px;
}

/* Light theme - keep default Bootstrap styling */
[data-theme="light"] .calculation-item {
    background-color: #ffffff;
}

[data-theme="light"] .calculation-item small.text-muted {
    color: #6c757d;
}

/* Tax Calculator - Load button height fix */
#loadSavedByYearBtn {
    height: 38px;
    padding: 0.375rem 0.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Ensure proper alignment in input group */
.input-group > #assessmentYear {
    height: 38px;
}

.input-group > #assessmentYear + #loadSavedByYearBtn {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}
